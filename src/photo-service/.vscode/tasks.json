{
  "version": "2.0.0",
  "tasks": [
    {
     "label": "Restart Photo API",
      "type": "shell",
      "command": "bash -c 'if [ -f /tmp/uvicorn.pid ]; then kill $(cat /tmp/uvicorn.pid) 2>/dev/null; fi; sleep 1; setsid uvicorn main:app --reload --host 0.0.0.0 --port 8000 > /tmp/uvicorn.log 2>&1 & echo $! > /tmp/uvicorn.pid && echo \"‚úÖ API restarted (PID: $(cat /tmp/uvicorn.pid))\"'",
      "problemMatcher": []
    },
    {
      "label": "Start Photo API",
      "type": "shell",
      "command": "bash -c 'setsid uvicorn main:app --reload --host 0.0.0.0 --port 8000 > /tmp/uvicorn.log 2>&1 & echo $! > /tmp/uvicorn.pid && sleep 2 && if kill -0 $(cat /tmp/uvicorn.pid) 2>/dev/null; then echo \"‚úÖ API started (PID: $(cat /tmp/uvicorn.pid))\"; else echo \"‚ùå Failed\"; cat /tmp/uvicorn.log; fi'",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Stop Photo API",
      "type": "shell",
      "command": "if [ -f /tmp/uvicorn.pid ]; then kill $(cat /tmp/uvicorn.pid) 2>/dev/null && echo 'üõë API stopped' || echo '‚ö†Ô∏è  No running API found'; rm -f /tmp/uvicorn.pid; else echo '‚ö†Ô∏è  No PID file found'; fi",
      "problemMatcher": []
    },
    {
      "label": "View Photo API Logs",
      "type": "shell",
      "command": "tail -f /tmp/uvicorn.log",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
       {
      "label": "Check Photo API Status",
      "type": "shell",
      "command": "bash -c 'if [ -f /tmp/uvicorn.pid ] && kill -0 $(cat /tmp/uvicorn.pid) 2>/dev/null; then echo \"‚úÖ API running (PID: $(cat /tmp/uvicorn.pid))\"; curl -s http://localhost:8000/health | python -m json.tool 2>/dev/null || echo \"‚ö†Ô∏è  API process exists but not responding\"; else echo \"‚ùå API not running\"; fi'",
      "problemMatcher": []
    },
    {
      "label": "Run Photo Tests",
      "type": "shell",
      "command": "pytest -v",
      "problemMatcher": [],
       "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    }
  ]
}